<div id="chat_view">
  <div class="row mt-5">
    <div class="col-12 mb-3">
      <h3><%= @client.client_name %>さんとのチャット</h3>
    </div>
  </div>

  <div id="messages_all" class="mx-auto">
    <% @chats.each do |chat| %>
      <% if chat.therapist_id == current_therapist.id %>
        <div class="d-flex justify-content-end">
          <%= image_tag current_therapist.get_therapist_image(50, 50), class: "mb-2 rounded-circle" %>
        </div>
        <div class="d-flex justify-content-end">
          <p class="text-left my_chat mr-5 mb-0">
            <%= chat.message %>
          </p>
        </div>
        <div class="d-flex justify-content-end">
          <p class="text-left mr-5">
            <span class="created_at"><%= chat.created_at.strftime('%m/%d %H:%M') %></span>
          </p>
        </div>
      <% else %>
        <div class="d-flex justify-content-start">
          <%= image_tag @client.get_client_image(50, 50), class: "mb-2 rounded-circle" %>
        </div>
        <div class="d-flex justify-content-start">
          <p class="another_chat ml-5 mb-0">
            <%= chat.message %>
          </p>
        </div>
        <div class="d-flex justify-content-start">
          <p class="text-left ml-5">
            <span class="created_at"><%= chat.created_at.strftime('%m/%d %H:%M') %></span>
          </p>
        </div>
      <% end %>
    <% end %>
  </div>

  <div id="errors">
    <%= render "layouts/errors", obj: @chat %>
  </div>
  <%= form_with model: @chat, url: therapist_client_chats_path, class:"text-center", local: false do |f| %>
    <%= f.text_area :message, rows: "1", placeholder: "メッセージを入力", class: "message form-control d-inline" %>
    <%= f.hidden_field :room_id, value: @room.id %>
    <%= f.submit "送信", class: "btn  btn-md btn-info chat_btn" %>
  <% end %>
</div>